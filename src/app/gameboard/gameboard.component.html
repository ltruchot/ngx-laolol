<div [hidden]= "cpntData.lang?.isCurrentLoading || !(cpntData.lang?.isLearningLoading)" class="loading"></div>
<div class="row">
	<div class="col-xs-12">
			<app-submenu></app-submenu>
	</div>
</div>
<div class="row">
	<div class="col-xs-12">
		<h4 class="mx0 px5tb" [hidden]="cpntData.winItemIdx === null">
			{{ 'gameboard.findTranslation' | translate }}:
			<span class="text-big" *ngIf="cpntData.items[cpntData.winItemIdx]">
				{{ cpntData.items[cpntData.winItemIdx][cpntData.theme.isReversed ? cpntData.lang.learningLang : cpntData.lang.currentLang].wrd }}
			</span>
			<ng-template [ngIf]="cpntData.theme.isReversed && cpntData.theme.isKaraoke && !cpntData.theme.learningTheme.noKaraoke && cpntData.items[cpntData.winItemIdx] &&
			cpntData.items[cpntData.winItemIdx][cpntData.lang.learningLang].kk[cpntData.lang.currentLang]">
				<em class="text-primary">({{ cpntData.items[cpntData.winItemIdx][cpntData.lang.learningLang].kk[cpntData.lang.currentLang] }})</em>
			</ng-template>
			<em *ngIf="(cpntData.lang?.currentLang === 'fr' || cpntData.lang?.currentLang === 'en') &&
			!cpntData.theme.isReversed && cpntData.items[cpntData.winItemIdx] &&
			cpntData.items[cpntData.winItemIdx][cpntData.lang.currentLang].meta?.tone">
				({{ cpntData.items[cpntData.winItemIdx][cpntData.lang.currentLang].meta?.tone }})
			</em>
		</h4>
	</div>
</div>
<div class="row game-buttons-container is-flex">
	<div *ngFor="let item of cpntData.items; let i = index;" class="col-xs-6 col-md-3">
		<div class="px5tb">
			<button (click)="checkAnswer(i)" type="button"
			[disabled]="cpntData.clickedIdx !== null && (cpntData.clickedIdx !== i)" class="btn btn-lg btn-block"
			[ngClass]="{
				'btn-default': cpntData.clickedIdx === null || (cpntData.clickedIdx === -1),
				'btn-success': i === cpntData.winItemIdx && cpntData.isCheckingAnswer,
				'btn-danger': i === cpntData.clickedIdx && cpntData.clickedIdx !== cpntData.winItemIdx,
				'disabled': cpntData.clickedIdx !== null && (cpntData.clickedIdx !== i)
			}">
				{{ item[cpntData.theme.isReversed ? cpntData.lang.currentLang : cpntData.lang.learningLang].wrd }}
				<em *ngIf="(cpntData.lang?.currentLang === 'fr' || cpntData.lang?.currentLang === 'en') &&
				cpntData.theme.isReversed &&
				item[cpntData.lang.currentLang].meta?.tone">
					({{ item[cpntData.lang.currentLang].meta?.tone }})
				</em>
				<ng-template [ngIf]="cpntData.theme.isKaraoke && !cpntData.theme.learningTheme.noKaraoke && !cpntData.theme.isReversed">
					<br />
					<em class="text-primary">{{ item[cpntData.lang.learningLang].kk[cpntData.lang.currentLang] }}</em>
				</ng-template>
			</button>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-xs-12">
		<div class="progress">
			<div class="progress-bar no-transition" role="progressbar"
			aria-valuenow="cpntData.currentQuestionTimer" aria-valuemin="0" aria-valuemax="100"
			[style.width]="cpntData.currentQuestionTimer + '%'"></div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-xs-12">
		<div [hidden]="cpntData.clickedIdx === null">
			<h4 *ngIf="cpntData.clickedIdx === cpntData.winItemIdx; else elseBlock">
				{{ 'gameboard.correctAnswer' | translate }}
			</h4>
			<ng-template #elseBlock>
				<h4>
					{{ 'gameboard.wrongAnswer' | translate }}
				</h4>
			</ng-template>
			<button (click)="nextQuestion()" type="button" class="btn btn-primary">{{ 'gameboard.next' | translate }}</button>
		</div>
	</div>
</div>
