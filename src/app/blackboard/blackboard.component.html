<div [hidden]= "cpntData.lang?.isCurrentLoading || !(cpntData.lang?.isLearningLoading)" class="loading"></div>
<app-submenu></app-submenu>
<div class="row">
	<div class="col">
		<h2 class="text-center backboard-title" [ngClass]="{'font-lao': !cpntData.lang.isCurrentLangLao}"
			*ngIf="cpntData.theme?.learning && cpntData.lang?.learningLang">
			{{
				(cpntData.theme.learning.displayPlural ?
				cpntData.theme.learning.link[cpntData.lang.learningLang].tongue.plural :
				cpntData.theme.learning.link[cpntData.lang.learningLang].wrd)  | capitalize
			}}
			<ng-template [ngIf]="cpntData.theme.displayKaraoke &&
				cpntData.theme.learning.link[cpntData.lang.learningLang].kk &&
				cpntData.theme.learning.link[cpntData.lang.learningLang].kk[cpntData.lang.currentLang]">
				<em class="text-primary" [ngClass]="{'font-lao': cpntData.lang.isCurrentLangLao}" innerHTML="{{ cpntData.theme.learning.link[cpntData.lang.learningLang].kk[cpntData.lang.currentLang] | unbreakable }}"></em>
			</ng-template>

			<em [ngClass]="{'font-lao': cpntData.lang.isCurrentLangLao}">
				({{
					(cpntData.theme.learning.displayPlural ?
					cpntData.theme.learning.link[cpntData.lang.currentLang].tongue.plural :
					cpntData.theme.learning.link[cpntData.lang.currentLang].wrd)  | capitalize
				}})
			</em>
		</h2>
	</div>
</div>
<div class="blackboard-items" *ngIf="cpntData.theme.items.length">
	<div class="row">
		<div class="col-6 col-sm-4 col-md-3 mxtb5" *ngFor="let item of cpntData.items; let i = index;">
			<div class="card h-100">
			  <div class="card-header pos-r">
			    <ng-template [ngIf]="cpntData.lang?.learningLang === 'fr'">
					  <span *ngIf="(!cpntData.theme?.learning?.noArticle) &&
					  	item.fr.meta && item.fr.meta.isMale !== undefined">
					  	{{ item.fr.meta.isMale ? 'un' : 'une' }}
					  </span>
					  {{ item.fr.wrd }}
					</ng-template>
					<ng-template [ngIf]="cpntData.lang?.learningLang === 'en'">
						<span *ngIf="!cpntData.theme?.learning?.noArticle">
					  	{{ cpntData.vowels.en.test(item.en.wrd[0]) ? "an" : "a" }}
					  </span>
					  {{ item.en.wrd }}
					</ng-template>
					<ng-template [ngIf]="cpntData.lang?.learningLang === 'lo'">
						<span class="font-lao">{{ item.lo.wrd }}</span>
					</ng-template>
					<ng-template [ngIf]="cpntData.theme.displayKaraoke && cpntData.lang?.learningLang &&
						!cpntData.theme.learning.noKaraoke &&
						item[cpntData.lang.learningLang].kk &&
						item[cpntData.lang.learningLang].kk[cpntData.lang.currentLang]">
						<br />
						<em class="text-medium text-primary" [ngClass]="{'font-lao': cpntData.lang.isCurrentLangLao}" innerHTML="{{ item[cpntData.lang.learningLang].kk[cpntData.lang.currentLang] | unbreakable }}"></em>
					</ng-template>
					<label class="pos-top-right p5" *ngIf="item[cpntData.lang.learningLang].audioLoaded"
					title="{{ 'blackboard.listen' | translate }}" (click)="playsound(i)">
						<span class="text-medium icon-volume-low"></span>
					</label>
			  </div>
			  <div class="card-img-top pos-r" *ngIf="cpntData.theme?.learning?.hasImages">
			  	<img *ngIf="!item.img" src="/assets/img/questionmark.jpg" />
					<img *ngIf="item.img" [src]="'/assets/medias/' + item.img" />
					<div *ngIf="cpntData.theme.learning.hasSpecialExample" class="text-muted pos-top-left">
						{{ item.lo.ex }}
					</div>
				</div>
			  <div class="card-body">
			    <h3 class="card-title" [ngClass]="{'font-lao': cpntData.lang.isCurrentLangLao}">{{ item[cpntData.lang.currentLang].wrd }}</h3>
			    <p class="card-text" *ngIf="cpntData.lang && (cpntData.lang.learningLang === 'fr') && item.fr.meta && (item.fr.meta.isMale !== undefined)">
						<strong>
							{{ cpntData.vowels.fr.test(item.fr.wrd[0]) ? "l'" : (item.fr.meta.isMale ? "le " : "la ") }}{{ item.fr.wrd }}
						</strong>
						 <em  [ngClass]="{'font-lao': cpntData.lang.isCurrentLangLao}">({{ item.fr.meta.isMale ? ('blackboard.masculine' | translate) : ('blackboard.feminine' | translate) }})</em>
					</p>
					<div class="collapse" [ngClass]="{
						'hide': !cpntData.theme?.isMoreInfos,
						'show': cpntData.theme?.isMoreInfos
					}">
						<hr *ngIf="(!cpntData.theme.learning.noPlural && cpntData.lang &&
							(cpntData.lang.learningLang === 'fr' || cpntData.lang.learningLang === 'en')) ||
							(item[cpntData.lang.currentLang].meta && item[cpntData.lang.currentLang].meta.comment) ||
							cpntData.lang.currentLang === 'lo'" />
						<p class="card-text" *ngIf="!cpntData.theme.learning.noPlural && !cpntData.lang?.learningLangInfos?.noPlural">
							<strong *ngIf="cpntData.lang.learningLang === 'fr'">les</strong>
							<strong>{{ item[cpntData.lang.learningLang].tongue.plural }}</strong>
						</p>
						<p class="card-text"
							*ngIf="item[cpntData.lang.currentLang].meta && item[cpntData.lang.currentLang].meta.comment">
							<em>{{ item[cpntData.lang.currentLang].meta.comment }}</em>
						</p>
				    <p class="card-text" *ngIf="cpntData.lang?.currentLang === 'lo'">
							<span class="text-uppercase">{{ item[cpntData.lang.learningLang].wrd }}</span>
						</p>
					</div>
			  </div>
			</div>
		</div>
	</div>
</div>